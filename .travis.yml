language: bash

env:
  - IMAGE=3.8.2-openjdk-8 ARGS=-Dair.java.version=1.8
  - IMAGE=3.8.2-openjdk-11 ARGS=
  - IMAGE=3.8.2-openjdk-16 ARGS=
  - IMAGE=3.8.2-openjdk-17 ARGS=

install:
  - IMAGE=maven:$IMAGE
  - RUN="run -v $PWD:/build -w /build $IMAGE"
  - docker pull $IMAGE
  - docker run $IMAGE whoami
  - docker run $IMAGE ls -l /usr/bin/mvn /usr/share/maven/bin
  - docker $RUN mvn -V -B -q dependency:go-offline $ARGS

script:
  - docker $RUN mvn -V -B clean install $ARGS
